<!doctype html>

<html>

<head>

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta charset="utf-8">
	<title>OpenWeatherMap API jQuery Plugin</title>
	<meta name="description" content="A simple, lightweight jQuery plugin used to display the current weather of any city using the free OpenWeatherMap API.">
	<meta name="author" content="http://blinksmith.github.io/openweathermap">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href="http://websygen.github.io/owfont/css/owfont-regular.css" rel="stylesheet" type="text/css">	
	<link href="css/style.css" rel="stylesheet" type="text/css">
	
</head>

<body lang="en" class="use500px">

	<div class="weather-wrapper hide">
	
		<div><i class="owfontTarget owf-3x owf-pull-left owf-border"></i>
	    <strong><span class="weather-place"></span></strong><br>
	    Temp <span class="cTarget hideshow"></span><span class="fTarget hideshow" style="display: none"></span> <span class="weatherMainTarget"></span> (<span class="weather-description capitalize"></span>)<br>
	    Min <span class="cminTarget hideshow"></span><span class="fminTarget hideshow" style="display: none"></span> Max <span class="cmaxTarget hideshow"></span><span class="fmaxTarget hideshow" style="display: none"></span> <button>T</button>
        </div>
		
	    <hr>
		
		<p><strong>Humidity</strong>
		<br /><span class="weather-humidity"></span></p>
		
		<p><strong>Wind speed</strong>
		<br /><span class="weather-wind-speed"></span></p>
		
		<p><strong>Sunrise</strong>
		<br /><span class="weather-sunrise"></span></p>
		
		<p><strong>Sunset</strong>
		<br /><span class="weather-sunset"></span></p>

	</div>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>	
	<script src="js/openWeather.min.js"></script>	
	
	<script>
	
  $(function() {
    $.ajax({url: 'http://ipinfo.io',
    dataType: 'json',
    async: true,
        success: function(data) {
        //  var loc = data.loc.split(",");
        //  var ipInfoLat = loc[0]; 
        //  var ipInfoLng = loc[1]; 
        var ipInfoCity = data.city;
        var ipInfoCountry = data.country;

			$('.weather-wrapper').openWeather({
			    kFlickr: '4ef2fe2affcdd6e13218f5ddd0e2500d',
            //  k500px: 'nkhCruHRPS6UUNodyA0r9FVWAKZKbKpYJZFmwjnx',
     			backgroundImage : 'useFlickr',
				key: 'c9d49310f8023ee2617a7634de23c2aa',			
			//	lat: '-6.16',
			//	lng: '106.83',
			//	lat: ipInfoLat,
			//	lng: ipInfoLng,
			//	city: 'Jakarta, ID',
				city: ipInfoCity + ',' + ipInfoCountry,
				descriptionTarget: '.weather-description',
				windSpeedTarget: '.weather-wind-speed',
				cTarget: '.cTarget',
				fTarget: '.fTarget',
				cminTarget: '.cminTarget',
				fminTarget: '.fminTarget',
				cmaxTarget: '.cmaxTarget',
				fmaxTarget: '.fmaxTarget',
				humidityTarget: '.weather-humidity',
				sunriseTarget: '.weather-sunrise',
				sunsetTarget: '.weather-sunset',
				placeTarget: '.weather-place',
			//	customIconTarget: '.custom-weather-icon',
			//	oriIconTarget: '.weather-icon',
				owfontTarget: '.owfontTarget',
				success: function() {
					$('.weather-wrapper').show();
					//toggle temperature
					$( "button" ).click(function() {$( ".hideshow" ).toggle();});
				},
				error: function() {
					console.log("These aren't the droids you're looking for.");
				}
			});
        }
    });
   });
	
	</script>

</body>
	
</html>
